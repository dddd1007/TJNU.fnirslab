spm_convert_all()
get_onset_all()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset_all <- function(x) {
if(is.na(x)){
message("Please input the onset ")
}
getfilename <- dir()
matfilename <- getfilename[stringr::str_detect(getfilename, ".mat|.MAT")]
for (i in matfilename){
get_onset(filename = i, onsetnumber = x)
}
}
get_onset_all()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset_all <- function(x = NA) {
if(is.na(x)){
message("Please input the onset ")
}
getfilename <- dir()
matfilename <- getfilename[stringr::str_detect(getfilename, ".mat|.MAT")]
for (i in matfilename){
get_onset(filename = i, onsetnumber = x)
}
}
get_onset_all()
?stop
stop()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset_all <- function(x = NA) {
if(is.na(x)){
message("Warning: Please input the onset! ")
stop()
}
getfilename <- dir()
matfilename <- getfilename[stringr::str_detect(getfilename, ".mat|.MAT")]
for (i in matfilename){
get_onset(filename = i, onsetnumber = x)
}
}
get_onset_all()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset_all <- function(x = NA) {
if(is.na(x)){
message("Warning: Please input the onset! ")
break()
}
getfilename <- dir()
matfilename <- getfilename[stringr::str_detect(getfilename, ".mat|.MAT")]
for (i in matfilename){
get_onset(filename = i, onsetnumber = x)
}
}
get_onset_all()
get_onset_all()
get_onset_all(c(1,11,2,22,3,33,4,44))
read.table("sub1.TXT", header = F, skip = 36) -> a
a[2]
a[2] -> b
mean(b)
class(b)
class(as.vector(b))
class(as.vector(unlist(b)))
mena(as.vector(unlist(b)))
mean(as.vector(unlist(b)))
unique(b)
unique(b) %>>%
unlist() %>>%
head()
unique(b) -> c
c
unlist(c)
unlist(c【2)
unlist(c[2])
c[2]
c
list(rnames(c)<- NULL)
unlist(row.names(c)<- NULL)
rownames(c)
c[1]
unlist9c[1]
unlist(c[1])
as.vector(c[1])
as.numeric(c[1])
c[1] -> d
d
class(d)
c[[1]]
filename <- c("sub2.mat")
matfile <- R.matlab::readMat(filename)
onset_mat <- unlist(matfile[1]$nirs.data[7])
onsetnumber <- unique(onsetnumber)[[1]]
onsetnumber
onset_mat
unique(onset_mat)
unique(onset_mat)[[1]]
unique(onset_mat)[[1]]
unique(onset_mat)[1]
unique(onset_mat)
unique(onset_mat) -> a
a[a =! 0]
a
a[a != 0]
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset <- function(filename){
matfile <- R.matlab::readMat(filename)
onset_mat <- unlist(matfile[1]$nirs.data[7])
onsetnumber <- unique(onsetnumber)
onsetnumber <- onsetnumber[onsetnumber != 0]
trail_num <- length(onsetnumber)
result <- data.frame(matrix(0, ncol = 2, nrow = trail_num))
colnames(result) <- c("onset", "scans")
for(i in 1 : trail_num){
onset_detect <- onsetnumber[i]
result[i,1] <- onset_detect
result[i,2] <- stringr::str_c(as.character(which(onset_mat == onset_detect)), collapse = " ")
}
myfilename <- stringr::str_sub(filename, start = 1, end = -5)
myfilename <- stringr::str_c(myfilename,"_onset",".csv", sep = "")
write.csv(result, myfilename)
}
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset_all <- function(x = NA) {
getfilename <- dir()
matfilename <- getfilename[stringr::str_detect(getfilename, ".mat|.MAT")]
for (i in matfilename){
get_onset(filename = i, onsetnumber = x)
}
}
get_onset_all()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset <- function(filename){
matfile <- R.matlab::readMat(filename)
onset_mat <- unlist(matfile[1]$nirs.data[7])
onsetnumber <- unique(onset_mat)
onsetnumber <- onsetnumber[onsetnumber != 0]
trail_num <- length(onsetnumber)
result <- data.frame(matrix(0, ncol = 2, nrow = trail_num))
colnames(result) <- c("onset", "scans")
for(i in 1 : trail_num){
onset_detect <- onsetnumber[i]
result[i,1] <- onset_detect
result[i,2] <- stringr::str_c(as.character(which(onset_mat == onset_detect)), collapse = " ")
}
myfilename <- stringr::str_sub(filename, start = 1, end = -5)
myfilename <- stringr::str_c(myfilename,"_onset",".csv", sep = "")
write.csv(result, myfilename)
}
get_onset_all()
onset_mat <- unlist(matfile[1]$nirs.data[7])
onsetnumber <- unique(onset_mat)
onsetnumber <- onsetnumber[onsetnumber != 0]
onsetnumber
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset <- function(filename){
matfile <- R.matlab::readMat(filename)
onset_mat <- unlist(matfile[1]$nirs.data[7])
onsetnumber <- unique(onset_mat)
#onsetnumber <- onsetnumber[onsetnumber != 0]
trail_num <- length(onsetnumber)
result <- data.frame(matrix(0, ncol = 2, nrow = trail_num))
colnames(result) <- c("onset", "scans")
for(i in 1 : trail_num){
onset_detect <- onsetnumber[i]
result[i,1] <- onset_detect
result[i,2] <- stringr::str_c(as.character(which(onset_mat == onset_detect)), collapse = " ")
}
myfilename <- stringr::str_sub(filename, start = 1, end = -5)
myfilename <- stringr::str_c(myfilename,"_onset",".csv", sep = "")
write.csv(result, myfilename)
}
get_onset_all()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset_all <- function() {
getfilename <- dir()
matfilename <- getfilename[stringr::str_detect(getfilename, ".mat|.MAT")]
for (i in matfilename){
get_onset(filename = i)
}
}
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
get_onset <- function(filename){
matfile <- R.matlab::readMat(filename)
onset_mat <- unlist(matfile[1]$nirs.data[7])
onsetnumber <- unique(onset_mat)
onsetnumber <- onsetnumber[onsetnumber != 0]
trail_num <- length(onsetnumber)
result <- data.frame(matrix(0, ncol = 2, nrow = trail_num))
colnames(result) <- c("onset", "scans")
for(i in 1 : trail_num){
onset_detect <- onsetnumber[i]
result[i,1] <- onset_detect
result[i,2] <- stringr::str_c(as.character(which(onset_mat == onset_detect)), collapse = " ")
}
myfilename <- stringr::str_sub(filename, start = 1, end = -5)
myfilename <- stringr::str_c(myfilename,"_onset",".csv", sep = "")
write.csv(result, myfilename)
}
get_onset_all()
library(ggplot2)
?geom_bin2d
d <- ggplot(diamonds, aes(x, y)) + xlim(4, 10) + ylim(4, 10)
d + geom_bin2d()
d + geom_bin2d(aes(bins = 0.02))
d + geom_bin2d(binwidth = c(0.1, 0.1))
d + geom_bin2d(binwidth = c(0.01, 0.01))
diamonds
d <- ggplot(diamonds, aes(x, y, fill = color)) + xlim(4, 10) + ylim(4, 10)
d + geom_bin2d(binwidth = c(0.01, 0.01))
a <- data.frame(x = c(1:5), y = 1:5, z = 1:5)
a
d <- ggplot(a, aes(x, y, fill = z))
d + geom_bin2d()
d + geom_bin2d(binwidth = c(0.01, 0.01))
d + geom_bin2d(binwidth = c(0.01, 0.1))
d + geom_bin2d(binwidth = c(1,1))
d + geom_bin2d(binwidth = c(30,30))
d + geom_bin2d(binwidth = c(1,1))
d + geom_bin2d(binwidth = c(1,1), aes(fill = z))
d$z <- 0.01:100
z
d$z
d
a$z <- c(0.1,2,4,5,6)
d <- ggplot(a, aes(x, y, fill = z))
d + geom_bin2d(binwidth = c(1,1), aes(fill = z))
a <- rnorm
dat <- data.frame(x = rnorm(10, 30, .2), y = runif(10, 3, 5))
data
dat
y
plot(dat$y)
?scale
ggplot(faithfuld, aes(waiting, eruptions)) +
geom_raster(aes(fill = density), interpolate = TRUE)
ggplot(a, aes(x, y)) +
geom_raster(aes(fill = z), interpolate = TRUE)
ggplot(a, aes(x, y)) + geom_raster(aes(fill = z), interpolate = TRUE)
ggplot(a, aes(x = x, y = y, fill = z)) + geom_raster(interpolate = TRUE)
df
faithfuld
unique(faithfuld$eruptions)
