a
as.array(a)
as.vector(a)
c(a)
diff(c(a))
names(a)
names(a) <- NULL
a
c(a)
unlist(a)
diff(unlist(a))
mean(diff(unlist(a)))
View(a)
install.packages("pipr")
install.packages("piper")
install.packages("pipeR")
library(pipeR)
diff(unlist(a)) %>%
mean() %>%
1/.
??`pipeR-package`
mean(diff(unlist(a)))
1 / 0.027
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
spm_convert <- function(filename){
#读取数据
datafile <- read_delim(filename, "\t", escape_double = FALSE, trim_ws = TRUE,
skip = 35, col_names = FALSE)
#生成确定行列的数据框
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
time <- datafile[,1]
#循环分类取出氧合血红蛋白、脱氧血红蛋白、总血红蛋白变化
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
#取出其他部分的数据
Vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
#将数据转换成矩阵
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
#将数据整合为列表
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T)
#提取文件名
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
#生成Mat文件
writeMat(myfilename, nirs_data = nirs_data)
}
spm_convert_all <- function(){
getfilename <- dir()
txtfilename <- getfilename[str_detect(getfilename, ".txt|.TXT")]
spm_convert(txtfilename)
}
spm_convert_all()
library(stringr)
spm_convert_all()
library(readr)
spm_convert_all()
spm_convert("stroop1.TXT")
library(R.matlab)
spm_convert_all()
spm_convert("stroop1.TXT")
dir()
getfilename <- dir()
txtfilename <- getfilename[str_detect(getfilename, ".txt|.TXT")]
spm_convert(txtfilename)
spm_convert_all()
for (i in txtfilename){
spm_convert(i)
}
spm_convert_all <- function(){
getfilename <- dir()
txtfilename <- getfilename[str_detect(getfilename, ".txt|.TXT")]
for (i in txtfilename){
spm_convert(i)
}
}
spm_convert_all()
View(X2)
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
spm_convert <- function(filename){
#读取数据
datafile <- read_delim(filename, "\t", escape_double = FALSE, trim_ws = TRUE,
skip = 35, col_names = FALSE)
#生成确定行列的数据框
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
vector_onset <- datafile[,3]
time <- datafile[,1]
#循环分类取出氧合血红蛋白、脱氧血红蛋白、总血红蛋白变化
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
#取出其他部分的数据
Vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
#将数据转换成矩阵
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
#将数据整合为列表
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = vector_onset)
#提取文件名
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
#生成Mat文件
writeMat(myfilename, nirs_data = nirs_data)
}
spm_convert_all()
spm_convert_all()
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 dddd1007@gmail.com
spm_convert <- function(filename){
#读取数据
datafile <- read_delim(filename, "\t", escape_double = FALSE, trim_ws = TRUE,
skip = 35, col_names = FALSE)
#生成确定行列的数据框
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
time <- datafile[,1]
#循环分类取出氧合血红蛋白、脱氧血红蛋白、总血红蛋白变化
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
#取出其他部分的数据
vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
#将数据转换成矩阵
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
#将数据整合为列表
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = vector_onset)
#提取文件名
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
#生成Mat文件
writeMat(myfilename, nirs_data = nirs_data)
}
spm_convert_all()
spm_convert("stroop1.TXT")
spm_convert("stroop1.TXT")
spm_convert_all()
spm_convert("stroop2.TXT")
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 <dddd1007>@gmail.com
spm_convert <- function(filename){
#读取数据
datafile <- read_delim(filename, "\t", escape_double = FALSE, trim_ws = TRUE,
skip = 35, col_names = FALSE)
#生成确定行列的数据框
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
time <- datafile[,1]
#循环分类取出氧合血红蛋白、脱氧血红蛋白、总血红蛋白变化
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
#取出其他部分的数据
vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
#将数据转换成矩阵
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
vector_onset <- unlist(vector_onset)
#将数据整合为列表
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = vector_onset)
#提取文件名
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
#生成Mat文件
writeMat(myfilename, nirs_data = nirs_data)
}
spm_convert_all()
X2[,3]
unlist(unlist(X2[,3]))
as.vector(X2[,3])
class(X2[,3])
X2[,3] -> a
class(a)
as.numeric(a) %>>%
class
as.numeric(a) %>>%
class()
unlist(a, use.names = FALSE)
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 <dddd1007>@gmail.com
spm_convert <- function(filename){
#读取数据
datafile <- read_delim(filename, "\t", escape_double = FALSE, trim_ws = TRUE,
skip = 35, col_names = FALSE)
#生成确定行列的数据框
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
time <- datafile[,1]
#循环分类取出氧合血红蛋白、脱氧血红蛋白、总血红蛋白变化
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
#取出其他部分的数据
vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time ,use.names = FALSE))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
#将数据转换成矩阵
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
vector_onset <- unlist(vector_onset ,use.names = FALSE)
#将数据整合为列表
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = vector_onset)
#提取文件名
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
#生成Mat文件
writeMat(myfilename, nirs_data = nirs_data)
}
spm_convert_all()
spm_convert("stroop1.TXT")
writeMat()
datafile <- X2
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
time <- datafile[,1]
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time ,use.names = FALSE))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
vector_onset <- unlist(vector_onset ,use.names = FALSE)
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = vector_onset)
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
myfilename <- c("stroop.mat")
writeMat(myfilename, nirs_data = nirs_data)
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T)
writeMat(myfilename, nirs_data = nirs_data)
writeMat(myfilename, nirs_data = nirs_data)
Vector_onset <- unlist(Vector_onset, use.names = FALSE)
Vector_onset <- datafile[,3]        #onset点数据
Vector_onset <- unlist(Vector_onset, use.names = FALSE)
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = Vector_onset)
writeMat(myfilename, nirs_data = nirs_data)
#
#                       _oo0oo_
#                      o8888888o
#                      88" . "88
#                      (| -_- |)
#                      0\  =  /0
#                    ___/`---'\___
#                  .' \\|     |# '.
#                 / \\|||  :  |||# \
#                / _||||| -:- |||||- \
#               |   | \\\  -  #/ |   |
#               | \_|  ''\---/''  |_/ |
#               \  .-\__  '-'  ___/-. /
#             ___'. .'  /--.--\  `. .'___
#          ."" '<  `.___\_<|>_/___.' >' "".
#         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#         \  \ `_.   \_ __\ /__ _/   .-` /  /
#     =====`-.____`.___ \_____/___.-`___.-'=====
#                       `=---='
#
#
#     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#
#               佛祖保佑         永无BUG
#
# 天津师范大学 心理与行为研究院 近红外组
# 夏骁凯 编写
# 有问题请联系 <dddd1007>@gmail.com
spm_convert <- function(filename){
#读取数据
datafile <- read_delim(filename, "\t", escape_double = FALSE, trim_ws = TRUE,
skip = 35, col_names = FALSE)
#生成确定行列的数据框
rownum <- nrow(datafile)
colnum <- (ncol(datafile)-4)/3
oxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
dxyData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
tHbData <- as.data.frame(matrix(ncol = colnum, nrow = rownum))
time <- datafile[,1]
#循环分类取出氧合血红蛋白、脱氧血红蛋白、总血红蛋白变化
for (i in 1 : colnum) {
oxyData[,i] <- datafile[,(i*3)+2]
dxyData[,i] <- datafile[,(i*3)+3]
tHbData[,i] <- datafile[,(i*3)+4]
}
#取出其他部分的数据
Vector_onset <- datafile[,3]        #onset点数据
fs <- 1/(mean(diff(unlist(time ,use.names = FALSE))))  #计算采样率
nch <- (ncol(datafile)-4)/3         #通道数
T <- 1/fs                           #我也不知道是什么鬼
#将数据转换成矩阵
oxyData <- as.matrix(oxyData)
dxyData <- as.matrix(dxyData)
tHbData <- as.matrix(tHbData)
Vector_onset <- unlist(Vector_onset, use.names = FALSE)
#将数据整合为列表
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vectoronset = Vector_onset)
#提取文件名
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
#生成Mat文件
writeMat(myfilename, nirs_data = nirs_data)
}
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vectoronset = Vector_onset)
writeMat(myfilename, nirs_data = nirs_data)
nirs_data
Vector_onset <- as.numeric(unlist(Vector_onset, use.names = FALSE))
Vector_onset
vector_onset <- as.numeric(unlist(Vector_onset, use.names = FALSE))
vector_onset <- datafile[,3]        #onset点数据
vector_onset <- as.numeric(unlist(vector_onset, use.names = FALSE))
nirs_data <- list(oxyData = oxyData, dxyData = dxyData, tHbData = tHbData,
fs = fs, nch = nch, T = T, vector_onset = vector_onset)
myfilename <- str_sub(filename, start = 1, end = -5)
myfilename <- str_c(myfilename, "mat", sep = ".")
writeMat(myfilename, nirs_data = nirs_data)
which(a == 1)
summary(a)
a <- as.numeric(unlist(a, use.names = FALSE))
summary(a)
